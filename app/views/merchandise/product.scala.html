@(productForm:Form[(Product, String)])(implicit merchant:Option[Merchant])

@import helper._
@merchbase(Messages("merch.product.title"),merchant){
<SCRIPT LANGUAGE="JavaScript">
 function del(){
    if(confirm('@Messages("product.delete.confirm")')){
        $.ajax({
            async:false,
            url:"@routes.Products.delete(productForm.get._1.id)",
            type:"DELETE",
            success: function(result){
                document.location.href = "@routes.Products.list()";
            }
            }
        );
    }
 }
</SCRIPT>
@productForm.errors.map { error =>
<p class="error">
    @error.message
</p>
}

@form(action = routes.Products.update) {
<fieldset>
    @defining(productForm("merchantId")) { uidField =>
    <input type="hidden" name="@uidField.name" id="@uidField.id" value="@merchant.get.id">
    }
    @defining(productForm("id")) { uidField =>
    <input type="hidden" name="@uidField.name" id="@uidField.id" value="@productForm("id")">
    }

    @inputText(
    productForm("name"),
    '_label -> Messages("product.name"),
    '_error -> productForm.globalError
    )

    @inputText(
    productForm("description"),
    '_label -> Messages("product.desc"),
    '_error -> productForm.globalError
    )

    @inputText(
    productForm("longDescription"),
    '_label -> Messages("product.longdesc"),
    '_error -> productForm.globalError
    )

    @inputText(
    productForm("startDate"),
    '_label -> Messages("product.startDate"),
    '_error -> productForm.globalError
    )

    @inputText(
    productForm("endDate"),
    '_label -> Messages("product.endDate"),
    '_error -> productForm.globalError
    )

    @inputText(
    productForm("categories"),
    '_label -> Messages("product.category"),
    '_error -> productForm.globalError
    )


</fieldset>
<div class="submit-action">
    <input type="submit" class="btn primary" value="@Messages("product.update")">
    <input type="button" id="deleteBtn" class="btn primary" value="@Messages("product.delete")" onclick="del()">
</div>
}
}